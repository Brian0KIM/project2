# EV3 MicroPython (Pybricks) - Right-Hand Rule Line Maze

이 프로젝트는 **EV3 MicroPython (Pybricks)** 환경을 기준으로 작성된 라인트레이스/미로 탐색 코드입니다.

## 하드웨어(요청사항 기준)
- 컬러센서 3개: 좌/중/우 = 포트 1/2/3
- 라지 모터 2개: 바퀴
- 미디움 모터 1개: 집게(그리퍼)
- 초음파센서 1개: 포트 4

## 동작 요약
- **시작**: EV3 본체 가운데 버튼을 누르면 주행 시작
- **라인 추종**: 3개의 컬러센서 반사광(reflection) 기반 P-제어
- **교차로/갈림길 규칙**: 기본은 **우회전 우선**(오른쪽 가능 → 직진 → 좌회전 → 유턴)
- **노드(끝 지점)**: 노드 끝에는 **파란색 스티커**가 있다고 가정
  - 파란색 감지 시: 비프 + 노드 카운트 증가 + 시간 기록(콘솔/화면 표시)
  - 일반적으로 끝 지점은 막다른길이므로, 필요 시 **유턴 후 재진입**(설정 가능)
- **옵션(색 마커 기반 집게)**: 추가 센서가 없으므로 물체(통) “자동 감지”는 한계가 있어,
  - 기본 제공 옵션으로 **RED 마커**를 “픽업 지점”으로, **BLUE(노드)**를 “드롭 지점”으로 사용할 수 있습니다.
- **초음파 기반 집게(현재 구현)**: 초음파센서가 가까운 물체를 감지하면 집고, 이후 첫 Blue 노드에서 내려놓습니다.

## 파일 구조
- `main.py`: 엔트리포인트
- `config.py`: 포트/임계값/튜닝 파라미터
- `robot.py`: 센서/모터 래핑
- `line_follow.py`: 라인 추종 및 상태 판단(교차로/노드 감지)
- `navigator.py`: 우회전 우선 탐색(교차로에서의 결정/회전)
- `gripper.py`: 집게 시퀀스(옵션)
- `utils.py`: 공용 유틸(타이머/로깅)

## 튜닝(필수)
라인/바닥 환경마다 반사광 값이 달라서 `config.py`의 아래 값은 꼭 조정하세요.
- `REFLECTION_BLACK_MAX`
- `REFLECTION_WHITE_MIN`
- `LINE_THRESHOLD`

## 사용 방법(개요)
1) EV3 MicroPython(Pybricks) 프로젝트에 본 파일들을 그대로 복사
2) `config.py`에서 모터 포트를 실제 연결에 맞게 수정
3) EV3에서 `main.py` 실행


