# EV3 MicroPython (Pybricks) - Right-Hand Rule Line Maze

이 프로젝트는 **EV3 MicroPython (Pybricks)** 환경을 기준으로 작성된 라인트레이스/미로 탐색 코드입니다.

## 하드웨어(요청사항 기준)
- 컬러센서 3개: 좌/중/우 = 포트 1/2/3
- 라지 모터 2개: 바퀴
- 미디움 모터 1개: 집게(그리퍼)
- 초음파센서 1개: 포트 4

## 동작 요약
- **시작**: EV3 본체 가운데 버튼을 누르면 주행 시작
- **라인 추종**: 좌/우 컬러센서는 반사광(reflection) 기반 라인트레이싱 전용, 가운데 센서는 색(Color) 모드 고정
- **상태(state) 기반 제어**: 좌/중/우를 흰/검으로 이진화하여 3비트 state(0~7)로 관리
- **교차로/탐색**: DFS(백트래킹) 기반 탐색, 우선순위는 **우 → 직 → 좌**
- **노드(끝 지점)**: 가운데 센서가 **RED**를 감지하면 노드로 판단(카운트/시간 표시 + 효과음)
  - 물체 운반 중이면 노드에서 하역 후 소폭 후진
  - 노드는 일반적으로 막다른길이므로 기본은 유턴 후 백트래킹
- **피니시**: 가운데 센서가 **GREEN** 감지 시 종료
- **초음파 기반 집게(현재 구현)**: 초음파센서가 가까운 물체를 감지하면 집고, 이후 첫 RED 노드에서 내려놓습니다.

## 파일 구조
- `main.py`: 엔트리포인트
- `config.py`: 포트/임계값/튜닝 파라미터
- `robot.py`: 센서/모터 래핑
- `line_follow.py`: 라인 추종 및 상태 판단(교차로/노드 감지)
- `navigator.py`: 우회전 우선 탐색(교차로에서의 결정/회전)
- `gripper.py`: 집게 시퀀스(옵션)
- `utils.py`: 공용 유틸(타이머/로깅)

## 튜닝(필수)
라인/바닥 환경마다 반사광 값이 달라서 `config.py`의 아래 값은 꼭 조정하세요.
- `REFLECTION_BLACK_MAX`
- `REFLECTION_WHITE_MIN`
- `LINE_THRESHOLD`

## 사용 방법(개요)
1) EV3 MicroPython(Pybricks) 프로젝트에 본 파일들을 그대로 복사
2) `config.py`에서 모터 포트를 실제 연결에 맞게 수정
3) EV3에서 `main.py` 실행


